<view class="profile-page">
  <!-- å·²ç™»å½•çŠ¶æ€ -->
  <view wx:if="{{isLogin}}" class="logged-in-content">
    <!-- ç”¨æˆ·ä¿¡æ¯å¡ç‰‡ -->
    <view class="user-card">
      <view class="user-header">
        <image 
          class="user-avatar" 
          src="{{userInfo.avatar}}" 
          mode="aspectFill" 
          bindlongpress="onAvatarLongPress"
        />
        <view class="user-info">
          <text class="user-name">{{userInfo.nickname}}</text>
          <text class="user-level">{{userInfo.level || 'ç”¨æˆ·'}}</text>
        </view>
        <image class="edit-btn" src="/static/images/icon/edit.png" bindtap="onEditProfile" />
      </view>
    </view>

    <!-- æ•°æ®ç»Ÿè®¡ -->
    <view class="stats-container">
      <view class="stats-header">
        <text class="stats-icon">â—</text>
        <text class="stats-title">å­¦ä¹ æ•°æ®</text>
        <text class="stats-decoration">â—</text>
      </view>
      
      <view class="stats-grid">
        <view class="stat-item">
          <text class="stat-number">{{stats.totalCourses}}</text>
          <text class="stat-label">æ€»è¯¾ç¨‹</text>
          <text class="stat-icon">â™¦</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.completedCourses}}</text>
          <text class="stat-label">å·²å®Œæˆ</text>
          <text class="stat-icon">âœ“</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.totalStudyTime}}</text>
          <text class="stat-label">å­¦æ—¶(åˆ†)</text>
          <text class="stat-icon">â—‹</text>
        </view>
        <view class="stat-item">
          <text class="stat-number">{{stats.certificates}}</text>
          <text class="stat-label">è¯ä¹¦</text>
          <text class="stat-icon">â˜…</text>
        </view>
      </view>
    </view>

    <!-- æˆå°±ç³»ç»Ÿ -->
    <view class="achievements-container">
      <view class="achievements-header">
        <text class="achievements-icon">â˜…</text>
        <text class="achievements-title">æˆ‘çš„æˆå°±</text>
        <text class="achievements-decoration">â™ª</text>
      </view>
      
      <view class="achievements-grid">
        <view 
          class="achievement-item {{item.unlocked ? 'unlocked' : 'locked'}}"
          wx:for="{{achievements}}" 
          wx:key="id"
          data-id="{{item.id}}"
          bindtap="onAchievementClick"
        >
          <view class="achievement-icon">
            <text class="{{item.unlocked ? 'icon-active' : 'icon-inactive'}}">{{item.icon}}</text>
          </view>
          <text class="achievement-title">{{item.title}}</text>
          <text class="achievement-desc">{{item.description}}</text>
          <view wx:if="{{item.unlocked}}" class="achievement-date">{{item.date}}</view>
        </view>
      </view>
    </view>

    <!-- åŠŸèƒ½èœå• -->
    <view class="menu-container">
      <view class="menu-list">
        <view 
          class="menu-item"
          wx:for="{{menuItems}}" 
          wx:key="id"
          data-path="{{item.path}}"
          bindtap="onMenuClick"
        >
          <view class="menu-icon">
            <text>{{item.icon}}</text>
          </view>
          <text class="menu-title">{{item.title}}</text>
          <text class="menu-arrow">â–¶</text>
        </view>
      </view>
    </view>

    <!-- é€€å‡ºç™»å½• -->
    <view class="logout-container">
      <button class="logout-btn" bindtap="onLogout">é€€å‡ºç™»å½•</button>
    </view>
  </view>

  <!-- æœªç™»å½•çŠ¶æ€ -->
  <view wx:else class="not-logged-in-content">
    <view class="login-prompt">
      <view class="login-icon">
        <text>ğŸ‘¤</text>
      </view>
      <text class="login-title">æ¬¢è¿ä½¿ç”¨çŠ¬æ•æ·è®­ç»ƒ</text>
      <text class="login-desc">ç™»å½•åå¯äº«å—ä¸ªæ€§åŒ–å­¦ä¹ ä½“éªŒ</text>
      
      <view class="login-actions">
        <button class="login-btn" bindtap="onWechatLogin">å¾®ä¿¡ä¸€é”®ç™»å½•</button>
        <button class="skip-btn" bindtap="onSkipLogin">æš‚ä¸ç™»å½•</button>
      </view>
    </view>


  </view>
</view>