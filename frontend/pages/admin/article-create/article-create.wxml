<view class="article-create-page">
  <!-- é¡µé¢æ ‡é¢˜ -->
  <view class="page-header">
    <text class="page-title">æ–°å¢æ–‡ç« </text>
    <text class="page-subtitle">åˆ›å»ºæ–°çš„èµ„è®¯å†…å®¹</text>
  </view>

  <!-- è¡¨å•å†…å®¹ -->
  <view class="form-container">
    <!-- æ–‡ç« æ ‡é¢˜ -->
    <view class="form-item">
      <text class="form-label">æ–‡ç« æ ‡é¢˜ *</text>
      <input 
        class="form-input" 
        placeholder="è¯·è¾“å…¥æ–‡ç« æ ‡é¢˜ï¼ˆ5-100å­—ç¬¦ï¼‰"
        value="{{formData.title}}"
        bindinput="onTitleInput"
        maxlength="100"
      />
      <view class="char-count">{{formData.title.length}}/100</view>
      <view class="error-tip" wx:if="{{errors.title}}">{{errors.title}}</view>
    </view>

    <!-- æ–‡ç« æ‘˜è¦ -->
    <view class="form-item">
      <text class="form-label">æ–‡ç« æ‘˜è¦ *</text>
      <textarea 
        class="form-textarea" 
        placeholder="è¯·è¾“å…¥æ–‡ç« æ‘˜è¦ï¼ˆ10-200å­—ç¬¦ï¼‰"
        value="{{formData.summary}}"
        bindinput="onSummaryInput"
        maxlength="200"
        auto-height
      />
      <view class="char-count">{{formData.summary.length}}/200</view>
      <view class="error-tip" wx:if="{{errors.summary}}">{{errors.summary}}</view>
    </view>

    <!-- æ–‡ç« åˆ†ç±» -->
    <view class="form-item">
      <text class="form-label">æ–‡ç« åˆ†ç±» *</text>
      <picker 
        class="form-picker" 
        bindchange="onCategoryChange" 
        value="{{categoryIndex}}" 
        range="{{categoryOptions}}"
      >
        <view class="picker-text">{{categoryOptions[categoryIndex]}}</view>
      </picker>
      <view class="error-tip" wx:if="{{errors.category}}">{{errors.category}}</view>
    </view>

    <!-- å°é¢å›¾ç‰‡ -->
    <view class="form-item">
      <text class="form-label">å°é¢å›¾ç‰‡ *</text>
      <view class="image-upload">
        <view class="image-preview" wx:if="{{formData.cover}}">
          <image src="{{formData.cover}}" mode="aspectFill" />
          <view class="image-delete" bindtap="deleteCover">
            <text class="delete-icon">Ã—</text>
          </view>
        </view>
        <view class="upload-btn" wx:else bindtap="chooseCover">
          <text class="upload-icon">ğŸ“·</text>
          <text class="upload-text">é€‰æ‹©å°é¢å›¾ç‰‡</text>
        </view>
      </view>
      <view class="error-tip" wx:if="{{errors.cover}}">{{errors.cover}}</view>
    </view>

    <!-- æ–‡ç« å†…å®¹ -->
    <view class="form-item">
      <text class="form-label">æ–‡ç« å†…å®¹ *</text>
      <view class="content-editor">
        <button class="editor-btn" bindtap="editContent">
          <text class="editor-icon">ğŸ“</text>
          <text class="editor-text">
            {{formData.content ? 'ç¼–è¾‘æ–‡ç« å†…å®¹' : 'æ·»åŠ æ–‡ç« å†…å®¹'}}
          </text>
        </button>
        <view class="content-preview" wx:if="{{formData.content}}">
          <text class="preview-text">{{contentPreview}}</text>
        </view>
      </view>
      <view class="error-tip" wx:if="{{errors.content}}">{{errors.content}}</view>
    </view>

    <!-- æ–‡ç« æ ‡ç­¾ -->
    <view class="form-item">
      <text class="form-label">æ–‡ç« æ ‡ç­¾</text>
      <input 
        class="form-input" 
        placeholder="è¯·è¾“å…¥æ ‡ç­¾ï¼Œç”¨é€—å·åˆ†éš”"
        value="{{formData.tags}}"
        bindinput="onTagsInput"
      />
      <view class="form-tip">ä¾‹å¦‚ï¼šè®­ç»ƒæŠ€å·§,æ–°æ‰‹æŒ‡å—,ä¸“ä¸šçŸ¥è¯†</view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’® -->
  <view class="action-buttons">
    <button class="btn btn-secondary" bindtap="saveDraft" disabled="{{saving}}">
      <text wx:if="{{saving}}">ä¿å­˜ä¸­...</text>
      <text wx:else>ä¿å­˜è‰ç¨¿</text>
    </button>
    <button class="btn btn-primary" bindtap="publishArticle" disabled="{{saving}}">
      <text wx:if="{{saving}}">å‘å¸ƒä¸­...</text>
      <text wx:else>ç«‹å³å‘å¸ƒ</text>
    </button>
  </view>
</view>