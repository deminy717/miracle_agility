<!--pages/lesson-detail/lesson-detail.wxml-->
<view class="lesson-detail-page">
  <!-- åŠ è½½çŠ¶æ€ -->
  <view class="loading-container" wx:if="{{loading}}">
    <text class="loading-text">åŠ è½½ä¸­...</text>
  </view>

  <!-- è¯¾æ—¶å†…å®¹ -->
  <scroll-view class="lesson-scroll-view" scroll-y wx:if="{{!loading}}">
    
    <!-- è¯¾æ—¶æ ‡é¢˜åŒºåŸŸ -->
    <view class="lesson-header-section">
      <view class="lesson-header-content">
        <text class="lesson-main-title">{{lessonInfo.title || 'è¯¾æ—¶æ ‡é¢˜'}}</text>
        <text class="lesson-subtitle">{{lessonInfo.description || 'è¯¾æ—¶æè¿°'}}</text>
      </view>
    </view>

    <!-- å†…å®¹åŒºåŸŸ -->
    <view class="lesson-content-area" wx:if="{{lessonInfo.lessonCards && lessonInfo.lessonCards.length > 0}}">
      <view wx:for="{{lessonInfo.lessonCards}}" wx:key="id" class="content-section">
        
        <!-- æ–‡æœ¬å†…å®¹ -->
        <view wx:if="{{item.cardType === 'text'}}" class="content-text-section">
          <text wx:if="{{item.title}}" class="section-title">{{item.title}}</text>
          <text class="section-content">{{item.content}}</text>
        </view>
        
        <!-- å›¾ç‰‡å†…å®¹ -->
        <view wx:elif="{{item.cardType === 'image' && item.imageUrl}}" class="content-image-section">
          <image src="{{item.imageUrl}}" mode="widthFix" class="section-image"></image>
          <text wx:if="{{item.imageDescription}}" class="image-caption">{{item.imageDescription}}</text>
        </view>
        
        <!-- è§†é¢‘å†…å®¹ -->
        <view wx:elif="{{item.cardType === 'video' && item.videoUrl}}" class="content-video-section">
          <video src="{{item.videoUrl}}" controls class="section-video" poster="{{item.videoThumbnail}}"></video>
        </view>
        
        <!-- é‡ç‚¹å†…å®¹ -->
        <view wx:elif="{{item.cardType === 'highlight'}}" class="content-highlight-section">
          <text wx:if="{{item.title}}" class="highlight-section-title">{{item.title}}</text>
          <view class="highlight-box">
            <view wx:for="{{item.highlightPoints}}" wx:key="pointIndex" wx:for-item="point" class="highlight-point">
              <text class="point-marker">ğŸ’¡</text>
              <text class="point-text">{{point}}</text>
            </view>
          </view>
        </view>

        <!-- éŸ³é¢‘å†…å®¹ -->
        <view wx:elif="{{item.cardType === 'audio' && item.audioUrl}}" class="content-audio-section">
          <view class="audio-player">
            <text class="audio-icon">ğŸµ</text>
            <text class="audio-title">{{item.title || 'éŸ³é¢‘å†…å®¹'}}</text>
            <text class="audio-duration">{{item.audioDuration || 'æ—¶é•¿æœªçŸ¥'}}</text>
          </view>
        </view>

        <!-- æµ‹éªŒå†…å®¹ -->
        <view wx:elif="{{item.cardType === 'quiz'}}" class="content-quiz-section">
          <view class="quiz-box">
            <text class="quiz-icon">â“</text>
            <text class="quiz-title">{{item.title || 'äº’åŠ¨æµ‹éªŒ'}}</text>
            <text class="quiz-description">ç‚¹å‡»å¼€å§‹ç­”é¢˜</text>
          </view>
        </view>

        <!-- ç©ºå†…å®¹æç¤º -->
        <view wx:else class="content-empty-section">
          <text class="empty-text">å†…å®¹ä¸ºç©ºæˆ–ç±»å‹ä¸æ”¯æŒæ˜¾ç¤º</text>
        </view>

      </view>
    </view>

    <!-- æ— å†…å®¹æç¤º -->
    <view wx:if="{{!lessonInfo.lessonCards || lessonInfo.lessonCards.length === 0}}" class="no-content-area">
      <view class="no-content-illustration">
        <text class="no-content-icon">ğŸ“</text>
        <text class="no-content-title">æš‚æ— è¯¾æ—¶å†…å®¹</text>
        <text class="no-content-subtitle">æ­¤è¯¾æ—¶å°šæ— å­¦ä¹ å†…å®¹</text>
      </view>
    </view>

    <!-- åº•éƒ¨å®‰å…¨è·ç¦» -->
    <view class="bottom-safe-area"></view>
  </scroll-view>
</view> 